(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(n,t){},133:function(n,t){},134:function(n,t){},180:function(n,t,e){"use strict";e.r(t);var i=e(3),r=e.n(i),a=e(83),c=e.n(a),o=(e(90),e(84)),s=e(28),u=e(29),l=e(31),f=e(30),d=e(32),m=(e(92),500),p=function(n){var t=n.x,e=n.y;return{clientX:t*m,clientY:400*(1-e)}},h=function(n){function t(n){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(f.a)(t).call(this,n))).state={circleParams:{r:3,stroke:"#fff",strokeWidth:1,fill:"#fff"}},e}return Object(d.a)(t,n),Object(u.a)(t,[{key:"componentDidMount",value:function(){var n=this.svg.getBoundingClientRect().width;m=n}},{key:"onAddCircle",value:function(n){var t=n.clientX,e=n.clientY;(0,this.props.onChangePoints)(function(n){var t=n.clientX,e=n.clientY;return{x:t/m,y:(400-e)/400}}({clientX:t,clientY:e}))}},{key:"renderDrawCircle",value:function(){var n=this;if(this.svg){var t=this.props.points,e=void 0===t?[]:t;if(e&&e.length)return e.map(function(t,e){var i=p(t),a=i.clientX,c=i.clientY;return r.a.createElement("circle",Object.assign({key:e,cx:a,cy:c},n.state.circleParams))})}}},{key:"renderDrawLine",value:function(){var n=this.props,t=n.tfPredict,e=n.points;if(n.isTraining&&!(e&&e.length<2)){var i=[0,1],a=t(i).dataSync(),c=p({x:i[0],y:a[0]}),o=c.clientX,s=c.clientY,u=p({x:i[1],y:a[1]}),l={x1:o,y1:s,x2:u.clientX,y2:u.clientY};return r.a.createElement("line",Object.assign({},l,{stroke:"red",strokeWidth:"2"}))}}},{key:"render",value:function(){var n=this;return r.a.createElement("svg",{ref:function(t){return n.svg=t},width:"100%",height:400,style:{background:"#282c34"},onClick:function(t){return n.onAddCircle(t)}},this.renderDrawCircle(),this.renderDrawLine())}}]),t}(i.Component),v=function(n){var t=n.points,e=n.onClickBtn,i=n.isTraining;return r.a.createElement("div",null,r.a.createElement("div",{className:"steps"},r.a.createElement("p",null,"[\u76ee\u6807] \u901a\u8fc7\u5728\u5c4f\u5e55\u4e0a\u70b9\u51fb\u7684\u79bb\u6563\u70b9, \u8bad\u7ec3\u7ebf\u6027\u6a21\u578b(y = ax + b), \u6700\u540e\u53ef\u5bf9\u67d0\u8f93\u5165\u503c\u8fdb\u884c\u8f93\u51fa\u503c\u7684\u9884\u6d4b"),r.a.createElement("p",null,"1.[\u6570\u636e\u6536\u96c6] \u8bf7\u70b9\u51fb\u5c4f\u5e55, \u5df2\u6709n\u4e2a\u70b9\u540e, \u70b9\u51fbButton\u8fdb\u884c\u6a21\u578b\u8bad\u7ec3 *\u8bf7\u70b9\u51fb\u81f3\u5c112\u4e2a\u70b9"),r.a.createElement("p",null,"2.[\u6a21\u578b\u8bad\u7ec3] \u53ef\u89c6\u7684\u7ea2\u7ebf \u4e3a\u5df2\u8bad\u7ec3\u6a21\u578b"),r.a.createElement("p",null,"3.[\u9884\u6d4b] \u6839\u636e\u5df2\u8bad\u7ec3\u7684\u6a21\u578b, \u8fdb\u884c\u8bad\u7ec3 ")),r.a.createElement("div",{className:"contents"},r.a.createElement("p",null,"\u5171\u6709 ",t&&t.length," \u4e2a\u6570\u636e(\u5df2\u70b9\u51fb\u70b9\u6570) "),r.a.createElement("button",{className:"button",onClick:e},"\u6a21\u578b\u8bad\u7ec3 Training"),r.a.createElement("div",null,"\u8bad\u7ec3\u540e\u6a21\u578b\u4e3a: ",i&&t&&t.length>1?"Y = ".concat(window.a," X + ").concat(window.b):"")))},g=e(11);window.a=g.e(g.a(Math.random())),window.b=g.e(g.a(Math.random()));var b=function(n){return g.c(function(){return function(n,t,e){return n.mul(t).add(e)}(g.b(n),window.a,window.b)})},w=function(n,t){return n.sub(t).square().mean()},y={training:function(n){for(var t=n.points,e=n.trainTimes,i=function(){var n=g.d.sgd(.1),e=g.b(t.map(function(n){return n.y}));console.log("\u8f93\u5165y",e.toString()),n.minimize(function(){return w(b(t.map(function(n){return n.x})),e)})},r=0;r<e;r++)i()},predict:b},k=function(n){function t(n){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(f.a)(t).call(this,n))).state={a:0,b:0,points:[],trainTimes:10,isTraining:!1},e}return Object(d.a)(t,n),Object(u.a)(t,[{key:"onChangePoints",value:function(n){this.setState({points:[].concat(Object(o.a)(this.state.points),[n])})}},{key:"shouldComponentUpdate",value:function(n,t){var e=t.points,i=t.trainTimes;return e&&e.length>1&&y.training({points:e,trainTimes:i}),!0}},{key:"render",value:function(){var n=this,t=this.state,e=t.points,i=t.isTraining;return r.a.createElement("div",{className:"app"},r.a.createElement(h,{onChangePoints:function(t){return n.onChangePoints(t)},points:e,tfPredict:function(n){return y.predict(n)},isTraining:i}),r.a.createElement(v,{isTraining:i,points:e,onClickBtn:function(){n.setState({isTraining:!0})}}))}}]),t}(i.Component);c.a.render(r.a.createElement(k,null),document.getElementById("root"))},85:function(n,t,e){n.exports=e(180)},90:function(n,t,e){},92:function(n,t,e){},98:function(n,t){}},[[85,2,1]]]);
//# sourceMappingURL=main.6d2a950a.chunk.js.map