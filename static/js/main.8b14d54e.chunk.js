(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(n,t){},133:function(n,t){},134:function(n,t){},180:function(n,t,e){"use strict";e.r(t);var i=e(8),r=e.n(i),c=e(83),a=e.n(c),o=(e(90),e(84)),u=e(28),s=e(29),l=e(31),f=e(30),d=e(32),h=(e(92),500),p=function(n){var t=n.x,e=n.y;return{clientX:t*h,clientY:500*(1-e)}},v=function(n){function t(n){var e;return Object(u.a)(this,t),(e=Object(l.a)(this,Object(f.a)(t).call(this,n))).state={circleParams:{r:3,stroke:"#fff",strokeWidth:1,fill:"#fff"}},e}return Object(d.a)(t,n),Object(s.a)(t,[{key:"componentDidMount",value:function(){var n=this.svg.getBoundingClientRect().width;h=n}},{key:"onAddCircle",value:function(n){var t=n.clientX,e=n.clientY;(0,this.props.onChangePoints)(function(n){var t=n.clientX,e=n.clientY;return{x:t/h,y:(500-e)/500}}({clientX:t,clientY:e}))}},{key:"renderDrawCircle",value:function(){var n=this;if(this.svg){var t=this.props.points,e=void 0===t?[]:t;if(e&&e.length)return e.map(function(t,e){var i=p(t),c=i.clientX,a=i.clientY;return r.a.createElement("circle",Object.assign({key:e,cx:c,cy:a},n.state.circleParams))})}}},{key:"renderDrawLine",value:function(){var n=this.props,t=n.tfPredict,e=n.points;if(!(e&&e.length<2)){var i=[0,1],c=t(i).dataSync(),a=p({x:i[0],y:c[0]}),o=a.clientX,u=a.clientY,s=p({x:i[1],y:c[1]}),l={x1:o,y1:u,x2:s.clientX,y2:s.clientY};return r.a.createElement("line",Object.assign({},l,{stroke:"red",strokeWidth:"2"}))}}},{key:"render",value:function(){var n=this;return r.a.createElement("svg",{ref:function(t){return n.svg=t},width:"100%",height:500,style:{background:"#282c34"},onClick:function(t){return n.onAddCircle(t)}},this.renderDrawCircle(),this.renderDrawLine())}}]),t}(i.Component),m=e(11),g=m.e(m.a(Math.random())),y=m.e(m.a(Math.random())),b=function(n){return m.c(function(){return function(n,t,e){return n.mul(t).add(e)}(m.b(n),g,y)})},k=function(n,t){return n.sub(t).square().mean()},j={training:function(n,t){for(var e=function(){var t=m.d.sgd(.1),e=m.b(n.map(function(n){return n.y}));console.log("\u8f93\u5165y",e.toString()),t.minimize(function(){return k(b(n.map(function(n){return n.x})),e)})},i=0;i<t;i++)e()},predict:b},C=function(n){function t(n){var e;return Object(u.a)(this,t),(e=Object(l.a)(this,Object(f.a)(t).call(this,n))).state={points:[],trainTimes:10},e}return Object(d.a)(t,n),Object(s.a)(t,[{key:"onChangePoints",value:function(n){this.setState({points:[].concat(Object(o.a)(this.state.points),[n])})}},{key:"shouldComponentUpdate",value:function(n,t){return t.points&&t.points.length>1&&j.training(t.points,t.trainTimes),!0}},{key:"render",value:function(){var n=this,t=this.state.points;return r.a.createElement("div",{className:"app"},r.a.createElement(v,{onChangePoints:function(t){return n.onChangePoints(t)},points:t,tfPredict:function(n){return j.predict(n)}}))}}]),t}(i.Component);a.a.render(r.a.createElement(C,null),document.getElementById("root"))},85:function(n,t,e){n.exports=e(180)},90:function(n,t,e){},92:function(n,t,e){},98:function(n,t){}},[[85,2,1]]]);
//# sourceMappingURL=main.8b14d54e.chunk.js.map